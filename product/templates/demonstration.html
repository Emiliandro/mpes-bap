{% extends 'base.html' %}


{% block body %}
<div class="content" style="padding-bottom: 100px;">
    <h1 style="text-align: center">{{title}}</h1>

    <div class="tab row">
        <button class="tablinks three columns" onclick="openTab(event, 'tab-search')">Buscas</button>
        <button class="tablinks three columns" onclick="openTab(event, 'tab-rawi')">Do feed</button>
        <button class="tablinks three columns" onclick="openTab(event, 'tab-nonr')">Últimas buscas</button>
        <button class="tablinks three columns" onclick="openTab(event, 'tab-suggestions')">Sugestões de temas</button>
    </div>
    <div id="tab-search" class="tabcontent">

    {% if non_repudiations|length < 1 %}
        <h4 style="text-align: center">Nenhuma busca feita ainda! Digite o que deseja abaixo.</h4>
    {% endif %}

        <div id="demonstrative_form" class="form row">
            <!--<form action="/" method="POST">
                <input class="nine columns" placeholder="Ola bap! Gostaria de saber mais sobre startups!" type="text" name="content" id="content">
                <input class="three columns" type="submit" value="Add Task">
            </form>--->
        </div>

        <div id="desmonstrative_results">
            <table id="last_imports" style="width: 90%; margin-left: 5%;">
                <tr>
                    <th>Titulo</th>
                    <th>Sumário</th>
                    <th>Source</th>
                    <th>Ações</th>
                </tr>
            {% for phrase in phrases %}
            <tr>
                <td>{{ phrase['title'] }}</td>
                <td>{{ phrase['body'] }}</td>
                <td>{{ phrase['href'] }}</td>
                <td><a href="/demo/phrase/{{phrase['title']}}" >Mais</a></td>
            </tr>
            {% endfor %}
            </table>
        </div>

    </div>

    <div id="tab-rawi" class="tabcontent" style="display: none;">
        <h4 >Last feed imports</h4>
        <table id="last_imports" style="width: 90%; margin-left: 5%;">
            <tr>
                <th>Data</th>
                <th>Sumário</th>
                <th>Categoria</th>
                <th>Source</th>
                <th>Action</th>
            </tr>
        {% for raw_import in raw_imports %}
        <tr>
            <td>{{ raw_import.date_created.date() }} </td>
            <td>{{ raw_import.summary }} </td>
            <td>{{ raw_import.categorie }} </td>
            <td>{{ raw_import.source }}  </td>
            <td> <a href="/demo/phrase/{{raw_import.summary}}" >Buscar</a></td>
        </tr>
        {% endfor %}
        </table>
    </div>
    
    <div id="tab-suggestions" class="tabcontent"  style="display: none;">
        <ul class="suggestions-list">
            {% for suggestion in suggestions %}
            <li><button><a href="/demo/phrase/{{suggestion}}" >{{ suggestion }}</a></button></li>
            {% endfor %}
        </ul>
    
        </div>

    <div id="tab-nonr" class="tabcontent" style="display: none;">
        <h4>Suas últimas buscas</h4>


    {% if non_repudiations|length < 1 %}
        <h4 style="text-align: center">Nenhuma busca feita ainda.</h4>
    {% endif %}


        <table id="last_searches"  style="width: 90%; margin-left: 5%;">
            <tr>
                <th style="width: 60%; " >Busca</th>
                <th>Data</th>
                <th>Actions</th>
            </tr>
            {% for task in non_repudiations %}
                <tr>
                    <td style="width: 60%; " >{{ task.summary }}</td>
                    <td>{{ task.date_created.date() }}</td>
                    <td>
                        <a href="/demo/phrase/{{task.summary}}">Repetir</a>
                    </td>
                </tr>
            {% endfor %}
        </table>

    </div>
</div>

<script>
    function openTab(evt, cityName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
    }
</script>
       
{% endblock %}
